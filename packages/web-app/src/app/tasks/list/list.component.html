<div class="container">
  <h1>Tasks</h1>
  <h3>Total Tasks: {{ tasksService.tasks.length }}</h3>
  <take-home-filters-component></take-home-filters-component>
  <take-home-search-component></take-home-search-component>
  <div class="action-button-row">
    <button data-testid="add-task" mat-flat-button class="action-button addTask-button" color="accent" (click)="onAddTask()">
      Add Task
    </button>
     <button data-testid="view-charts" mat-flat-button class="action-button chart-button custom-button" (click)="onViewCharts()">
      View Charts
    </button>
  </div>
  <div class="tasks">
    <ng-container *ngFor="let item of tasksService.tasks">
      <mat-card [class.complete]="item.completed">
        <div class="card-header">
          <mat-card-title>{{ item.title }}</mat-card-title>
          <div class="card-actions" *ngIf="item.uuid !== '1' && item.uuid !== '2'">
            
            <button
              *ngIf="!item.completed"
              data-testid="complete-task"
              color="primary"
              mat-flat-button
              class="action-button done-button"
              (click)="onDoneTask(item)"
            >
              <mat-icon>done</mat-icon>Done
            </button>
            <button
              data-testid="delete-task"
              color="warn"
              mat-flat-button
              class="action-button delete-button"
              (click)="onDeleteTask(item)"
            >
              <mat-icon>delete</mat-icon>Delete
            </button>
          </div>
        </div>
        <mat-card-content class="task-description">
          {{ item.description }}
        </mat-card-content>
        <div class="card-footer">
          <span class="due-date"><strong>Due Date:</strong> {{ item.scheduledDate | date : 'short' }}</span>
          <span *ngIf="item.priority === 'HIGH'" class="high-priority">{{ item.priority }}</span>
        </div>  
      </mat-card>
    </ng-container>
  </div>
</div>
